{
	"name": "Elbe Dev Container",
	"build": { "dockerfile": "Dockerfile_bookworm" },
	"customizations": {
		"vscode": {
			"settings": {
				"editor.formatOnSave": true,
				"files.insertFinalNewline": true,
				"[makefile]": {
					"editor.insertSpaces": false,
					"editor.detectIndentation": false
				}
			},
			"extensions": [
				"ms-vscode.makefile-tools",
				"ms-vscode.cpptools-extension-pack"
			]
		}
	},
	"remoteUser": "dev",
	// we want to run KVM accelerated QEMU VMs
	"privileged": true,
	"mounts": [
		// storage for initvm
		{
			"source": "${localWorkspaceFolder}/buildenv/initvm",
			"target": "/build/init",
			"type": "bind"
		}
	],
	// check and create the initvm if needed
	"postStartCommand": "/build/workspace/scripts/poststart.sh",
	"workspaceMount": "source=${localWorkspaceFolder},target=/build/workspace,type=bind,consistency=cached",
	"workspaceFolder": "/workspace"
}
